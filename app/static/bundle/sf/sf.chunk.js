(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{17:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return o});var n=a(0),r=a.n(n);function i(e){return e.split("\n\n").map(function(e,t){return r.a.createElement("p",{key:t},e.split("\n").map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},e,r.a.createElement("br",null))}))})}function o(e){if(!e)return null;var t=e.split("\n\n");return t.length>2?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,t[0]),r.a.createElement("p",null,t[1]),"..."):r.a.createElement(r.a.Fragment,null,t.map(function(e,t){return r.a.createElement("p",{key:t},e)}))}},42:function(e,t,a){},6:function(e,t,a){"use strict";a.d(t,"c",function(){return u}),a.d(t,"b",function(){return p}),a.d(t,"a",function(){return h}),a.d(t,"d",function(){return d});var n=a(1),r=a(2),i=a(4),o=a(3),s=a(5),l=a(0),c=a.n(l),u=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this.props.nazwa)}},{key:"render",value:function(){var e=this,t=this.props,a=t.nazwa,n=t.etykieta,r=t.pomoc,i=t.rows,o=t.form,s=void 0===o?{}:o,l=t.value,u=t.onChange,p=void 0===u?function(){}:u,h={};return!a.startsWith("p7_")&&"p8_opis"!==a||s.readonly||!s.tah||(h={height:s.tah}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("div",{className:"form-group"},a.indexOf("p7_")<0&&c.a.createElement("label",{className:"control-label"},n),c.a.createElement("textarea",{readOnly:s.readonly,className:"form-control ".concat(s.readonly||"edycja"),rows:i,id:a,name:a,value:l||s[a],onChange:p,"ria-describedby":a+"-help",style:h,ref:function(t){return e.props.focusRef&&e.props.focusRef(t)}}),r?c.a.createElement("p",{id:a+"-help",className:"help-block"},r):"")))}}]),t}(l.Component),p=function(e){var t=e.nazwa,a=e.etykieta,n=e.pomoc,r=e.cols,i=void 0===r?4:r,o=e.form,s=void 0===o?{}:o,l=e.value,u=e.onChange,p=void 0===u?function(){}:u;return c.a.createElement("div",{className:"col-md-"+i},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"control-label"},a),c.a.createElement("input",{readOnly:s.readonly,type:"text",className:"form-control",id:t,name:t,value:l||s[t],onChange:p,"aria-describedby":t+"-help"}),n?c.a.createElement("p",{id:t+"-help",className:"help-block"},n):""))},h=function(e){var t=e.nazwa,a=e.etykieta,n=e.cols,r=void 0===n?4:n,i=e.form,o=void 0===i?{}:i,s=e.value,l=e.onChange,u=void 0===l?function(){}:l;return c.a.createElement("div",{className:"col-md-"+r},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"control-label"},a),c.a.createElement("input",{readOnly:o.readonly,type:"text",pattern:"\\d{4}-\\d{2}-\\d{2}",className:"form-control",id:t,name:t,value:s||o[t],onChange:u,"aria-describedby":t+"-help"}),c.a.createElement("p",{id:t+"-help",className:"help-block"},"Data w formacie RRRR-MM-DD")))},d=function(e){var t=e.nazwa,a=e.etykieta,n=e.cols,r=void 0===n?12:n,i=e.form,o=void 0===i?{}:i,s=e.value;return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-"+r},c.a.createElement("div",{className:"checkbox"},c.a.createElement("label",null,c.a.createElement("input",{type:"checkbox",id:t,name:t,checked:s||o[t]})," ",a))))}},72:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(20),o=a.n(i),s=(a(42),a(16)),l=a(8),c=a.n(l),u=a(11),p=a(1),h=a(2),d=a(4),y=a(3),m=a(5),f=a(7),k={Aktywa:{1:"UB",2:"UBS",3:"B"},Pasywa:{1:"UB",2:"UBS",3:"B"},RZiSKalk:{1:"UBS"},RZiSPor:{1:"UBS"},ZestZmianWKapitale:{1:"UBS",2:"B"},PrzeplywyBezp:{1:"UBS",2:"B"},PrzeplywyPosr:{1:"UBS",2:"U"}},w=function(e,t){var a=k[e];return a[t.klu1.length]?"wyr".concat(a[t.klu1.length]):""},z=function(e,t){var a={1:t?"UBS kontener":""};return a[e.klucz.length]?"wyr".concat(a[e.klucz.length]):""},v=function(e){return e&&e.oblicz&&!e.oblicz.includes("(")},b=function(e,t){var a=["tekst"];return"nazwa"===t&&a.push("klu"+10*e.klu1.length),a.push("wyr"+e.klu1.length),v(e)&&a.push("oblicz"),a.join(" ")},j=function(e){return v(e)?"oblicz":""},g=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"onKeyPress",value:function(e,t,a,n){return function(r){if("Escape"===r.key)return r.target.value=e.org_value,void r.target.select();var i=-1;"Enter"!==r.key&&"ArrowDown"!==r.key||(i=n(a,1)),"ArrowUp"===r.key&&(i=n(a,-1)),-1!==i&&(r.preventDefault(),document.getElementById(t+i).focus())}}},{key:"readonly",value:function(e,t,a){return"b"===a&&!e.all_edit||t.kontener||v(t)?"readonly":""}},{key:"klasy",value:function(e,t,a){for(var n=arguments.length,r=new Array(n>3?n-3:0),i=3;i<n;i++)r[i-3]=arguments[i];return"ar ".concat((o=t[a],o.indexOf("-")>=0?"ujemna":"")," ").concat("obliczenia"===a?"":w(e.element,t)," ").concat(t.kontener?"kontener":""," ").concat(this.curr_class(t)," ").concat(j(t)," ").concat(r);var o}},{key:"tabindex",value:function(e,t,a){return e.all_edit?void 0:a?t:-1}},{key:"klucz",value:function(e){return e.el.replace("Aktywa_","").replace("Pasywa_","").replace(/_/g," ")}},{key:"curr_class",value:function(e){return e.current?"curr":""}},{key:"disabled",value:function(e){return v(e.oblicz)||e.kontener?"disabled":null}},{key:"onChange",value:function(e){var t=this;return function(a){t.props.onChange(e,a)}}},{key:"onFocus",value:function(e){var t=this;return function(a){t.props.onFocus(e,a)}}},{key:"onBlur",value:function(e){var t=this;return function(a){t.props.onBlur(e,a)}}},{key:"kolumna",value:function(e){var t=this.props,a=t.raport,n=t.wiersz,i=t.index,o=t.nextRow,s="kwota_"+e;return r.a.createElement("input",{type:"text",id:e+i,tabIndex:this.tabindex(a,i,"a"===e),readOnly:this.readonly(a,n,e),disabled:this.disabled(n),className:this.klasy(a,n,s),onChange:this.onChange(s),onBlur:this.onBlur(s),onFocus:this.onFocus(s),onKeyPress:this.onKeyPress(n,e,i,o),onKeyDown:this.onKeyPress(n,e,i,o),value:n[s]})}},{key:"oblFocus",value:function(e){var t=this;return function(){e.edytowana=!0,t.props.onStateChange()}}},{key:"formuly",value:function(e,t){var a=this.props.index,n="obliczenia";return t.edytowana?r.a.createElement("td",{className:b(t,n)},r.a.createElement("div",{autoComplete:"off",id:n+a,tabIndex:this.tabindex(e,a,!1),onChange:this.onChange(n),onBlur:this.onBlur(n),onFocus:this.onFocus(n),contentEditable:"true",ref:function(e){return e&&e.focus()}},t.formula)):r.a.createElement("td",{className:b(t,n),onClick:this.oblFocus(t)},t.formula)}},{key:"kwoty",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("td",{className:"kwoty"},this.kolumna("a")),r.a.createElement("td",{className:"kwoty end"},this.kolumna("b")))}},{key:"render",value:function(){var e=this.props,t=e.raport,a=e.wiersz;return r.a.createElement("tr",{className:[w(t.element,a),this.curr_class(a),j(a),a.kontener?" oblicz":""].join(" ").trim()},r.a.createElement("td",{className:"tekst klucz"},this.klucz(a)),r.a.createElement("td",{className:b(a,"nazwa")},a.nazwa),t.formuly?this.formuly(t,a):this.kwoty())}}]),t}(n.Component);function _(e){return e?e.toLocaleString("pl-PL",{minimumFractionDigits:2,useGrouping:!0}):""}function E(e){var t=e.trim();if(0===t.length)return t;t=t.replace(/\s/g,"").replace(",",".");var a=Number(t);return isNaN(t)?"":(t=parseFloat(Math.round(100*a)/100).toFixed(2),"0,00"===(t=parseFloat(t).toLocaleString("pl-PL",{minimumFractionDigits:2,useGrouping:!0}))&&(t=""),t)}function O(e){var t=e.trim().replace(/\s/g,"");t=t.replace(",","."),t=parseFloat(t);var a=Number(t);return isNaN(t)&&(a=0),a}var N=a(23),S=a(10),x=a.n(S),C={headers:{"Content-Type":"multipart/form-data"}},P={headers:{Accept:"application/json"}},F=function(e){return window.location.href.replace("jpk/","sf/").replace("#","")+(e?e+"/":"")},D={wprowadz_get:function(){return x.a.get(F(""),P)},wprowadz_save:function(e){return x.a.patch(F(""),e,C)},p8_del:function(e){var t=Object(N.a)(e,1)[0];return x.a.delete(F("p8/"+t.p8_id))},p8_save:function(e){var t=new FormData,a=JSON.stringify(e);t.append("data",a),(e.p8_id?x.a.patch(F("p8/"+e.p8_id),t):x.a.post(F("p8"),t)).then(function(a){t=a.data,e.p8_id=t.p8_id}).catch(function(e){return console.log(e)})},raport_get:function(){return x.a.get(F(""),P)},raport_save:function(e){return x.a.patch(F(""),e)},podatek_get:function(){return x.a.get(F(""),P)},podatek_save:function(e){return x.a.patch(F(""),e,C)},zalacznik_get:function(){return x.a.get(F(""),P)},zalacznik_save:function(e,t){return e?x.a.patch(F(""),t,C):x.a.post(F(""),t,C)},zalacznik_del:function(){return x.a.delete(F(""))},zalacznik_url:function(e){return F(e+"/plik")},xml_get:function(){return x.a.get("/jpk/1172/download/")}},B=function(e){function t(e){var a;Object(p.a)(this,t),(a=Object(d.a)(this,Object(y.a)(t).call(this,e))).state={raport:"",pozycje:[]},a.zmiany=!1;var n=!0,r=!1,i=void 0;try{for(var o,s=Object.getOwnPropertyNames(Object.getPrototypeOf(Object(f.a)(Object(f.a)(a))))[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;(l.startsWith("handle")||l.startsWith("toggle"))&&(a[l]=a[l].bind(Object(f.a)(Object(f.a)(a))))}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"zapisane",value:function(){return!this.zmiany}},{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark(function e(){var t,a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.raport_get();case 3:t=e.sent,a=t.data.pozycje.map(function(e){return e.kwota_a=_(e.kwota_a),e.kwota_b=_(e.kwota_b),e}),(n=t.data.raport).all_edit=!1,n.zerowe=!0,n.formuly=!1,n.size=a.length,this.setState({raport:n,pozycje:a}),this.zmiany=!1,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),window.jpk_error("B\u0142\u0105d przy ustalaniu pozycji zestawienia",e.t0);case 17:case"end":return e.stop()}},e,this,[[0,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"obliczenie",value:function(e,t){var a=this;if(!e||e.includes("("))return"";var n=0,r="+";return e.split(" ").forEach(function(e){if(["+","-",">","<"].includes(e))r=e;else{var i=a.state.pozycje[parseInt(e)];switch(e=O(t?i.kwota_a:i.kwota_b),r){case"-":n-=e;break;case">":n=n>0?n:0;break;case"<":n=n<0?n:0;break;default:n+=e}}}),n}},{key:"wyrazenie",value:function(e,t){if(e||0===e){Number.isInteger(e)&&(e=String(e));var a=!0,n=!1,r=void 0;try{for(var i,o=e.split(",")[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;s=parseInt(s);var l=this.state.pozycje[s];t?l.kwota_a=_(this.obliczenie(l.oblicz,t)):l.kwota_b=_(this.obliczenie(l.oblicz,t)),this.wyrazenie(l.zalezne,t)}}catch(c){n=!0,r=c}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}}}},{key:"handleChange",value:function(e){var t=this;return function(a,n){e[a]=n.target.value,t.setState(function(e){return e}),t.zmiany=!0}}},{key:"handleBlur",value:function(e){var t=this;return function(a,n){if(a.startsWith("obliczenia")){var r=n.target.innerHTML.replace(/&nbsp;/g," ").trimEnd();r!==e.formula&&(e.formula=r,t.zmiany=!0),e.edytowana=!1}else e[a]=E(n.target.value),(e.zalezne||0===e.zalezne)&&t.wyrazenie(e.zalezne,"kwota_a"===a);e.current=!1,t.setState(function(e){return e})}}},{key:"handleFocus",value:function(e){var t=this;return function(a,n){var r=n.target,i=e[a].trim();i=i.replace(/\s/g,"").replace(",","."),i=parseFloat(i),i=isNaN(i)?"":i.toLocaleString("pl-PL",{useGrouping:!1}),e[a]=i,e.org_value=e[a],e.current=!0,t.setState(function(e){return e},function(){r.select&&r.select()})}}},{key:"handleSave",value:function(){var e=Object(u.a)(c.a.mark(function e(){var t,a=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state.pozycje.map(function(e){return{id:e.id,a:O(e.kwota_a),b:O(e.kwota_b),obl:a.state.raport.formuly?e.formula:"!@#"}}),e.next=4,D.raport_save(t);case 4:window.jpk_info("Zmiany zosta\u0142y zapisane"),window.opener.location.reload(!1),this.zmiany=!1,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),window.jpk_error("B\u0142\u0105d przy zapisywaniu raportu",e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"niezerowy",value:function(e){return this.state.raport.zerowe||e.kwota_a||e.kwota_b}},{key:"handleNextRow",value:function(e,t){if(t>0)for(;e<this.state.pozycje.length-1&&(e++,this.state.pozycje[e].oblicz||this.state.pozycje[e].kontener););else for(;e>0&&(e--,this.state.pozycje[e].oblicz||this.state.pozycje[e].kontener););return e}},{key:"toggleZerowe",value:function(){this.setState(function(e){return{raport:Object(s.a)({},e.raport,{zerowe:!e.raport.zerowe})}})}},{key:"togglePoprzedni",value:function(){this.setState(function(e){return{raport:Object(s.a)({},e.raport,{all_edit:!e.raport.all_edit})}})}},{key:"toggleFormuly",value:function(){this.setState(function(e){return{raport:Object(s.a)({},e.raport,{formuly:!e.raport.formuly})}})}},{key:"handleStateChange",value:function(){this.setState(function(e){return e})}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{autoComplete:"off"},r.a.createElement("div",{className:"raport"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:this.state.raport.zerowe,onChange:this.toggleZerowe,name:"zerowe"})," Zerowe"),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:this.state.raport.all_edit,onChange:this.togglePoprzedni,name:"poprzedni"})," Poprzedni rok"),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:this.state.raport.formuly,onChange:this.toggleFormuly,name:"formuly"})," Formu\u0142y oblicze\u0144"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"al"},"Wiersz"),r.a.createElement("th",null,"Tre\u015b\u0107 / wyszczeg\xf3lnienie"),this.state.raport.formuly?r.a.createElement("th",{className:"formuly-kol"},"Formu\u0142y oblicze\u0144"):r.a.createElement(r.a.Fragment,null,r.a.createElement("th",{className:"ar"},"Bie\u017c\u0105cy okres"),r.a.createElement("th",{className:"ar end"},"Poprzedni okres")))),r.a.createElement("tbody",null,this.state.pozycje.filter(function(t){return e.niezerowy(t)}).map(function(t,a){return r.a.createElement(g,{key:t.id,raport:e.state.raport,wiersz:t,index:a,onChange:e.handleChange(t),onBlur:e.handleBlur(t),onFocus:e.handleFocus(t),nextRow:e.handleNextRow,onStateChange:e.handleStateChange})})))))}}]),t}(n.Component),T=a(21),U=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(y.a)(t).call(this,e))).edytuj=a.edytuj.bind(Object(f.a)(Object(f.a)(a))),a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"edytuj",value:function(e){return this.props.onSectionEdit(e,this.props.num)}},{key:"ikony",value:function(){return this.props.readOnly?r.a.createElement("ul",{className:"nav navbar-nav przyciski"},this.props.num>0&&this.props.num<7&&r.a.createElement("li",{onClick:this.edytuj},r.a.createElement("span",{className:"glyphicon glyphicon-pencil","aria-hidden":"true"}))):r.a.createElement("ul",{className:"nav navbar-nav przyciski"},r.a.createElement("li",{onClick:this.props.onZapisz},r.a.createElement("span",{className:"glyphicon glyphicon-floppy-disk","aria-hidden":"true"})),r.a.createElement("li",{onClick:this.props.onCancelEdit},r.a.createElement("span",{className:"glyphicon glyphicon-remove","aria-hidden":"true"})))}},{key:"render",value:function(){var e=this.props,t=e.num,a=e.title;return this.initClass="1"===this.props.num?"in":"",r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-heading",_role:"tab",id:"heading".concat(t)},this.ikony(),r.a.createElement("h4",{className:"panel-title naglowek"},r.a.createElement("a",{role:"button","data-toggle":"collapse","data-parent":"#accordion",href:"#collapse".concat(t),"aria-expanded":"true","aria-controls":"collapse".concat(t)},t,". ",a))),r.a.createElement("div",{className:"panel-body"},this.props.children,this.props.readOnly||r.a.createElement("div",{className:"row przyciski"},r.a.createElement("button",{className:"btn btn-success",onClick:this.props.onZapisz},"Zapisz"),r.a.createElement("button",{className:"btn btn-warning cancel",onClick:this.props.onCancelEdit},"Rezygnuj ze zmian"))))}}]),t}(n.Component),K=a(6),I=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.foc&&!this.props.form.readonly&&this.foc.focus()}},{key:"handleFocusRef",value:function(e){this.foc=e}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(K.c,Object.assign({nazwa:"p1_nazwa_firmy",etykieta:"Nazwa firmy",pomoc:"Pe\u0142na nazwa firmy",rows:"2",focusRef:this.handleFocusRef},this.props)),r.a.createElement("div",{className:"row"},r.a.createElement(K.b,Object.assign({nazwa:"p1_wojewodztwo",etykieta:"Wojew\xf3dztwo"},this.props)),r.a.createElement(K.b,Object.assign({nazwa:"p1_powiat",etykieta:"Powiat"},this.props)),r.a.createElement(K.b,Object.assign({nazwa:"p1_gmina",etykieta:"Gmina"},this.props))),r.a.createElement("div",{className:"row"},r.a.createElement(K.b,Object.assign({nazwa:"p1_miejscowosc",etykieta:"Miejscowo\u015b\u0107"},this.props)),r.a.createElement(K.b,Object.assign({nazwa:"p1_kod_pocztowy",etykieta:"Kod pocztowy"},this.props)),r.a.createElement(K.b,Object.assign({nazwa:"p1_poczta",etykieta:"Poczta"},this.props))),r.a.createElement("div",{className:"row"},r.a.createElement(K.b,Object.assign({nazwa:"p1_ulica",etykieta:"Ulica"},this.props)),r.a.createElement(K.b,Object.assign({nazwa:"p1_nr_domu",etykieta:"Nr domu"},this.props)),r.a.createElement(K.b,Object.assign({nazwa:"p1_nr_lokalu",etykieta:"Nr lokalu"},this.props))),r.a.createElement(K.c,Object.assign({nazwa:"p1_pkd",etykieta:"Przedmiot dzia\u0142alno\u015bci jednostki",pomoc:"Kody PKD okre\u015blaj\u0105ce podstawow\u0105 dzia\u0142alno\u015b\u0107 podmiotu",rows:"1"},this.props)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 wstep"},"Identyfikator podmiotu sk\u0142adaj\u0105cego sprawozdanie finansowe we w\u0142a\u015bciwym rejestrze s\u0105dowym albo ewidencji. W przypadku sprawozda\u0144 finansowych sk\u0142adanych do Szefa KAS wype\u0142nia si\u0119 identyfikator podatkowy. W sprawozdaniach finansowych sk\u0142adanych do KRS wype\u0142nia si\u0119 numer KRS."),r.a.createElement(K.b,Object.assign({nazwa:"p1_nip",etykieta:"Identyfikator podatkowy (NIP)"},this.props)),r.a.createElement(K.b,Object.assign({nazwa:"p1_krs",etykieta:"Numer KRS"},this.props))))}}]),t}(n.Component),M=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props;return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement(K.a,Object.assign({nazwa:"p2_data_od",etykieta:"Od dnia"},e)),r.a.createElement(K.a,Object.assign({nazwa:"p2_data_do",etykieta:"Do dnia"},e))),r.a.createElement(K.c,Object.assign({nazwa:"p2_data_do_opis",etykieta:"Do kiedy",rows:"2"},e,{pomoc:'Opis terminu zako\u0144czenia dzia\u0142alno\u015bci (alternatywny do "Do dnia")'})))}}]),t}(n.Component),W=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement(K.a,Object.assign({nazwa:"p3_data_od",etykieta:"Pocz\u0105tek okresu"},this.props)),r.a.createElement(K.a,Object.assign({nazwa:"p3_data_do",etykieta:"Koniec okresu"},this.props))),r.a.createElement("div",{className:"row"},r.a.createElement(K.b,Object.assign({nazwa:"p0_data_sporzadzenia",etykieta:"Sporz\u0105dzone",pomoc:"Data sporz\u0105dzenia sprawozdania"},this.props))))}}]),t}(n.Component),Z=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(K.d,Object.assign({nazwa:"p4_laczne",etykieta:"Sprawozdanie finansowe zawiera dane \u0142\u0105czne"},this.props)))}}]),t}(n.Component),R=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(K.d,Object.assign({nazwa:"p5_kontynuacja"},this.props,{etykieta:"Sprawozdanie finansowe zosta\u0142o sporz\u0105dzone przy za\u0142o\u017ceniu kontynuowania dzia\u0142alno\u015bci gospodarczej przez jednostk\u0119 w daj\u0105cej si\u0119 przewidzie\u0107 przysz\u0142o\u015bci"})),r.a.createElement(K.d,Object.assign({nazwa:"p5_brak_zagrozen"},this.props,{etykieta:"Nie istniej\u0105 okoliczno\u015bci wskazuj\u0105ce na zagro\u017cenie kontynuowania przez ni\u0105 dzia\u0142alno\u015bci"})),r.a.createElement(K.c,Object.assign({nazwa:"p5_opis_zagrozen"},this.props,{etykieta:"Opis okoliczno\u015bci wskazuj\u0105cych na zagro\u017cenie kontynuowania dzia\u0142alno\u015bci"})))}}]),t}(n.Component),A=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(K.d,Object.assign({nazwa:"p6_po_polaczeniu"},this.props,{etykieta:"Sprawozdanie finansowe sporz\u0105dzone po po\u0142\u0105czeniu sp\xf3\u0142ek"})),r.a.createElement(K.c,Object.assign({nazwa:"p6_metoda"},this.props,{etykieta:"Zastosowana metoda rozliczenia po\u0142\u0105czenia (nabycia, \u0142\u0105czenia udzia\u0142\xf3w)"})))}}]),t}(n.Component),L=a(17);function J(e){return r.a.createElement("a",{href:"/",className:"list-group-item",onClick:e.fullText(e.nazwa)},r.a.createElement("h4",{className:"list-group-item-heading nag"},e.etykieta),Object(L.b)(e.form[e.nazwa]))}function H(e){return r.a.createElement("div",null,r.a.createElement("h4",{className:"list-group-item-heading nag"},e.etykieta),Object(L.a)(e.form[e.pole]),r.a.createElement("button",{className:"btn btn-default",onClick:e.onFullTextEdit},"Zmie\u0144"),r.a.createElement("button",{className:"btn btn-default",onClick:e.onFullTextBack},"Powr\xf3t do wprowadzenia"))}function X(e){return r.a.createElement("div",null,r.a.createElement("h4",{className:"list-group-item-heading nag"},e.etykieta),r.a.createElement(K.c,Object.assign({nazwa:e.pole,rows:"10",value:e.form[e.pole]},e,{onMount:e.onMount})),r.a.createElement("button",{className:"btn btn-default",type:"submit",value:"Zapisz",onClick:e.onSaveFullText},"Zapisz zmiany"),r.a.createElement("button",{className:"btn btn-default cancel",value:"Anuluj",onClick:e.onCancelFullTextEdit},"Rezygnacja ze zmian"))}var G=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"list-group"},r.a.createElement(J,Object.assign({nazwa:"p7_zasady"},this.props,{etykieta:"Om\xf3wienie przyj\u0119tych zasad (polityki) rachunkowo\u015bci, w zakresie w jakim ustawa pozostawia jednostce prawo wyboru"})),r.a.createElement("div",{className:"wtracenie"},"w tym:"),r.a.createElement(J,Object.assign({nazwa:"p7_wycena"},this.props,{etykieta:"metod wyceny aktyw\xf3w i pasyw\xf3w (tak\u017ce amortyzacji)"})),r.a.createElement(J,Object.assign({nazwa:"p7_wynik"},this.props,{etykieta:"ustalenia wyniku finansowego"})),r.a.createElement(J,Object.assign({nazwa:"p7_spraw"},this.props,{etykieta:"ustalenia sposobu sporz\u0105dzenia sprawozdania finansowego"})))}}]),t}(n.Component),Y=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"p8_opis",value:function(e){return e.p8_opis.split("\n").map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},t&&e.length>0?r.a.createElement("br",null):"",e)})}},{key:"pozycja",value:function(e){return r.a.createElement("a",{href:"/",className:"list-group-item",onClick:function(t){return e.onP8Show(t,e.lp)}},r.a.createElement("h4",{className:"list-group-item-heading nag"},e.p8_nazwa),Object(L.b)(e.p8_opis))}},{key:"render",value:function(){return this.pozycja(Object(s.a)({},this.props,this.props.poz))}}]),t}(n.Component),q=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"uszczegolowienia",value:function(){var e=this;return this.props.form&&this.props.form.p8?this.props.form.p8.map(function(t,a){return r.a.createElement(Y,Object.assign({key:a,len:e.props.len,lp:a,poz:t},e.props))}):""}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"list-group"},this.uszczegolowienia()),r.a.createElement("button",{className:"btn btn-default",onClick:this.props.onDodaj},"Dodaj uszczeg\xf3\u0142owienie"))}}]),t}(n.Component),Q=r.a.lazy(function(){return a.e(3).then(a.bind(null,73))}),V=[[],[I,"Dane identyfikuj\u0105ce jednostk\u0119","Dane identyfikuj\u0105ce jednostk\u0119. Firma, siedziba albo miejsce zamieszkania."],[M,"Czas trwania dzia\u0142alno\u015bci","Czas trwania dzia\u0142alno\u015bci jednostki, <b>je\u017celi jest ograniczony</b>. Zakres dat od - do przy czym data do mo\u017ce mie\u0107 charakter opisowy."],[W,"Okres sprawozdania","Wskazanie okresu obj\u0119tego sprawozdaniem finansowym. Zakres dat od - do z uwzgl\u0119dnieniem ogranicze\u0144 dla elektronicznych sprawozda\u0144 finansowych."],[Z,"Dane \u0142\u0105czne","Wskazanie, \u017ce sprawozdanie finansowe zawiera dane \u0142\u0105czne, je\u017celi w sk\u0142ad jednostki wchodz\u0105 wewn\u0119trzne jednostki organizacyjne sporz\u0105dzaj\u0105ce samodzielne sprawozdania finansowe."],[R,"Za\u0142o\u017cenie kontynuacji dzia\u0142alno\u015bci",""],[A,"Sprawozdanie po po\u0142\u0105czeniu",""],[G,"Polityka rachunkowo\u015bci",""]],$={p7_zasady:"Om\xf3wienie przyj\u0119tych zasad (polityki) rachunkowo\u015bci, w zakresie w jakim ustawa pozostawia jednostce prawo wyboru",p7_wycena:"Om\xf3wienie przyj\u0119tej metody wyceny aktyw\xf3w i pasyw\xf3w (tak\u017ce amortyzacji)",p7_wynik:"Om\xf3wienie przyj\u0119tych zasad ustalenia wyniku finansowego",p7_spraw:"Om\xf3wienie sposobu sporz\u0105dzenia sprawozdania finansowego"},ee=function(e){function t(e){var a;Object(p.a)(this,t),(a=Object(d.a)(this,Object(y.a)(t).call(this,e))).state={readonly:!0,view:"calosc",p8:[]},a.zmiany=!1,a.old_y=null,a.new_y=null;var n=!0,r=!1,i=void 0;try{for(var o,s=Object.getOwnPropertyNames(Object.getPrototypeOf(Object(f.a)(Object(f.a)(a))))[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;l.startsWith("handle")&&(a[l]=a[l].bind(Object(f.a)(Object(f.a)(a))))}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"zapisane",value:function(){return!this.zmiany}},{key:"handleChange",value:function(e){if("checkbox"!==e.target.type||!this.state.readonly){var t=Object(T.a)({},e.target.name,"checkbox"===e.target.type?e.target.checked:e.target.value);"p8_opis"===e.target.name&&Object.assign(t,{tah:e.target.scrollHeight}),this.zmiany=!0,this.setState(t)}}},{key:"handleP8Change",value:function(e,t){var a=e.target.name,n=e.target.value,r=e.target.type,i=e.target.checked;this.setState(function(e){return e.p8[t][a]="checkbox"===r?i:n,{p8:e.p8}})}},{key:"handleP8Show",value:function(e,t){this.old_y=window.pageYOffset,e.preventDefault(),this.new_y=0,this.setState(function(e){var a=e.p8[t],n=a.p8_nazwa,r=a.p8_opis;return{view:"uszczegolowienie",p8_lp:t,p8_nazwa:n,p8_opis:r}})}},{key:"handleP8Back",value:function(e){var t=this;this.new_y=this.old_y,this.old_y=void 0,e.preventDefault(),this.setState(function(){t.setState({view:"calosc",lp:-1})})}},{key:"handleP8Save",value:function(e){var t=this;e.preventDefault(),this.new_y=0,this.zmiany=!1,this.setState(function(e){var t=e.p8_nazwa,a=e.p8_opis,n=e.p8,r=e.p8_lp;return r<0?(n.push({p8_id:0,p8_nazwa:t,p8_opis:a}),r=n.length-1):Object.assign(n[r],{p8_nazwa:t,p8_opis:a}),{p8:n,p8_lp:r,readonly:!0}},function(){t.onP8Save()})}},{key:"handleP8Edit",value:function(e){this.new_y=0,e.preventDefault(),this.setState(function(){return{readonly:!1}})}},{key:"handleP8Usun",value:function(e){this.new_y=this.old_y,this.old_y=void 0,e.preventDefault();var t=void 0;this.setState(function(e){var a=e.p8_lp,n=e.p8;return a>=0&&(t=n.splice(a,1)),{p8:n,view:"calosc"}},function(){D.p8_del(t)})}},{key:"handleP8Anuluj",value:function(e){var t=this;this.new_y=0,e.preventDefault(),this.setState(function(e){var a=t.state.p8_lp;if(a>=0){var n=e.p8[a],r=n.p8_nazwa,i=n.p8_opis;t.setState({readonly:!0,p8_nazwa:r,p8_opis:i})}else t.new_y=t.old_y,t.setState({readonly:!0,view:"calosc"})})}},{key:"handleDodaj",value:function(e){this.old_y=window.pageYOffset,this.new_y=0,e.preventDefault(),this.setState(function(){return{p8_lp:-1,p8_nazwa:"",p8_opis:"",view:"uszczegolowienie",readonly:!1}})}},{key:"uszczegolowienie",value:function(){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("div",null,"Loading ...")},r.a.createElement(Q,{form:this.state,onP8Edit:this.handleP8Edit,onP8Back:this.handleP8Back,onP8Save:this.handleP8Save,onP8Usun:this.handleP8Usun,onP8Anuluj:this.handleP8Anuluj,onMount:this.handleMount}))}},{key:"handleFullText",value:function(e){var t=this;return function(a){a.preventDefault(),t.old_y=window.pageYOffset,t.new_y=0,t.setState(function(){return{view:"full_text",pole:e}})}}},{key:"handleFullTextEdit",value:function(e){this.new_y=0,e.preventDefault(),this.zmiany=!1,this.setState(function(){return{view:"full_text_edit",readonly:!1}})}},{key:"handleFullTextSave",value:function(e){this.new_y=0,e.preventDefault(),this.onSave(e),this.setState(function(){return{view:"full_text",readonly:!0,tah:void 0}}),this.zmiany=!1}},{key:"handleFullTextBack",value:function(e){var t=this;this.new_y=this.old_y,this.old_y=void 0,e.preventDefault(),this.setState(function(){t.setState({view:"calosc",tah:void 0})})}},{key:"handleCancelFullTextEdit",value:function(e){e.preventDefault(),this.new_y=0,this.readData({view:"full_text",readonly:!0,tah:void 0})}},{key:"full_text",value:function(){return r.a.createElement(H,{pole:this.state.pole,etykieta:$[this.state.pole],form:this.state,onFullTextEdit:this.handleFullTextEdit,onFullTextBack:this.handleFullTextBack})}},{key:"handleMount",value:function(e){this.setState({tah:document.getElementById(e).scrollHeight})}},{key:"full_text_edit",value:function(){return r.a.createElement(X,{pole:this.state.pole,etykieta:$[this.state.pole],form:this.state,onSaveFullText:this.handleFullTextSave,onCancelFullTextEdit:this.handleCancelFullTextEdit,onMount:this.handleMount})}},{key:"view",value:function(){var e=null;switch(this.zmiany=!1,this.state.view){case"uszczegolowienie":e=this.uszczegolowienie();break;case"full_text":e=this.full_text();break;case"full_text_edit":e=this.full_text_edit();break;case"sekcja":e=this.P(this.state.num);break;default:e=this.calosc()}return e}},{key:"render",value:function(){return r.a.createElement("div",{className:"panel-body"},r.a.createElement("form",{onChange:this.handleChange,autoComplete:"off"},this.view()))}},{key:"componentDidMount",value:function(){this.readData({})}},{key:"readData",value:function(){var e=Object(u.a)(c.a.mark(function e(t){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.wprowadz_get();case 3:a=e.sent,n=a.data.form,this.setState(Object(s.a)({},n,t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),window.jpk_error("B\u0142\u0105d przy ustalaniu danych wprowadzenia",e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=new FormData,t=JSON.stringify(this.state);e.append("data",t),this.zmiany=!1,D.wprowadz_save(e).catch(function(e){return console.error("B\u0142\u0105d przy zapisywaniu wprowadzenia",e)})}},{key:"onP8Save",value:function(){var e=this.state.p8_lp,t=this.state.p8[e];t.p8_id,D.p8_save(t)}},{key:"handleSectionEdit",value:function(e,t){this.old_y=window.pageYOffset,this.new_y=0,console.log("handleSectionEdit",this),this.setState({view:"sekcja",num:t,readonly:!1})}},{key:"handleZapisz",value:function(e){this.new_y=this.old_y,this.old_y=void 0,e.preventDefault(),this.onSave(e),this.setState(function(){return{view:"calosc",readonly:!0}})}},{key:"handleCancelEdit",value:function(e){e.preventDefault(),this.new_y=this.old_y,this.old_y=void 0,this.readData({view:"calosc",readonly:!0})}},{key:"componentDidUpdate",value:function(){void 0!==this.new_y&&(window.scrollTo(0,this.new_y),this.new_y=void 0)}},{key:"P",value:function(e){var t=Object(N.a)(V[e],3),a=t[0],n=t[1],i=t[2];return r.a.createElement(U,{num:"".concat(e),title:n,onSectionEdit:this.handleSectionEdit,onZapisz:this.handleZapisz,onCancelEdit:this.handleCancelEdit,readOnly:this.state.readonly},r.a.createElement("div",{className:"wstep",dangerouslySetInnerHTML:{__html:i}}),r.a.createElement(a,{form:this.state,fullText:this.handleFullText,onFullTextEdit:this.handleFullTextEdit}))}},{key:"calosc",value:function(){return r.a.createElement("div",{className:"panel-group",id:"accordion",role:"tablist","aria-multiselectable":"true"},this.P(1),this.P(2),this.P(3),this.P(4),this.P(5),this.P(6),this.P(7),r.a.createElement(U,{num:"8",title:"Informacja uszczeg\xf3\u0142awiaj\u0105ca",readOnly:this.state.readonly},r.a.createElement("div",{className:"wstep"},"Informacja uszczeg\xf3\u0142awiaj\u0105ca, wynikaj\u0105ca z potrzeb lub specyfiki jednostki"),r.a.createElement(q,{len:this.state.p8.length,form:this.state,onP8Change:this.handleP8Change,onDodaj:this.handleDodaj,onP8Show:this.handleP8Show,onP8Edit:this.handleP8Edit})))}}]),t}(n.Component),te=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"wiersz_klasy",value:function(e){var t="tekst klu"+10*e.klucz.length;return t+=" wyr"+e.klucz.length}},{key:"ujemna_kwota",value:function(e,t){return e.indexOf("kwota")>=0&&t.indexOf("-")>=0?"ujemna":""}},{key:"podpozycje",value:function(e,t){return e.filter(function(e){return e.klucz[0]===t.klucz[0]&&!e.deleted}).length>1}},{key:"readonly",value:function(e,t,a,n){return a.kontener||a.oblicz||1===a.klucz.length&&(0===n.indexOf("pp")||this.podpozycje(t,a))?"readonly":""}},{key:"input_klasy",value:function(e,t,a,n){var r=t[a],i=["nazwa"===a?a:"ar"];if(a.startsWith("kwota")){var o=this.ujemna_kwota(a,r);o&&i.push(o)}t.kontener&&i.push("kontener");var s=this.curr_class(t);s&&i.push(s);for(var l=arguments.length,c=new Array(l>4?l-4:0),u=4;u<l;u++)c[u-4]=arguments[u];return i.push(c),1===t.klucz.length&&n&&i.push("wyrUSB kontener"),i.join(" ")}},{key:"tabindex",value:function(e,t,a){return e.all_edit?void 0:a?t:-1}},{key:"klucz",value:function(e){return e.klucz.replace("Aktywa_","").replace("Pasywa_","").replace(/_/g," ")}},{key:"curr_class",value:function(e){return e.current?"curr":""}},{key:"handleChange",value:function(e){var t=this;return function(a){t.props.onChange(e,a)}}},{key:"handleBlur",value:function(e){var t=this;return function(a){t.props.onBlur(e,a)}}},{key:"handleFocus",value:function(e){var t=this;return function(a){t.props.onFocus(e,a)}}},{key:"onKeyPress",value:function(e,t,a){var n=this;return function(r){if("Escape"===r.key)return r.target.value=e.org_value,void r.target.select();var i=-1;if("Enter"!==r.key&&"ArrowDown"!==r.key||(i=a+1<n.props.raport.size?a+1:a),"ArrowUp"===r.key&&(i=a>0?a-1:0),-1!==i){r.preventDefault();var o=document.getElementById(t+i);o&&o.focus()}}}},{key:"nazwaFocus",value:function(e){var t=this;return function(){e.edytowana=!0,t.props.onStateChange()}}},{key:"nazwa",value:function(e,t,a,n){var i="nazwa";return t.edytowana?r.a.createElement("td",{className:this.wiersz_klasy(t,i)},r.a.createElement("div",{autoComplete:"off",id:i+n,tabIndex:this.tabindex(e,n,!1),className:this.input_klasy(e,t,i,a),onChange:this.handleChange(i),onBlur:this.handleBlur(i),onFocus:this.handleFocus(i),onKeyPress:this.onKeyPress(t,i,n),onKeyDown:this.onKeyPress(t,i,n),contentEditable:"true",ref:function(e){return e&&e.focus()}},t.nazwa)):r.a.createElement("td",{className:this.wiersz_klasy(t,i),onClick:this.nazwaFocus(t)},t.nazwa)}},{key:"input",value:function(e,t,a,n,i,o){var s=o.indexOf("kwota")>=0?"kwoty ar":"pp";return 1===a.klucz.length&&0===o.indexOf("pp")?r.a.createElement("td",null," "):r.a.createElement("td",{className:s},r.a.createElement("input",{type:"text",autoComplete:"off",id:o+i,tabIndex:this.tabindex(e,i,!1),readOnly:this.readonly(e,t,a,o),className:this.input_klasy(e,a,o,n),onChange:this.handleChange(o),onBlur:this.handleBlur(o),onFocus:this.handleFocus(o),onKeyPress:this.onKeyPress(a,o,i),onKeyDown:this.onKeyPress(a,o,i),value:a[o]}))}},{key:"render",value:function(){var e=this.props,t=e.raport,a=e.pozycje,n=e.wiersz,i=e.index,o=e.podstawa;return r.a.createElement("tr",{className:[z(n,o),this.curr_class(n)].join(" ").trim()},r.a.createElement("td",{className:"tekst klucz"},this.klucz(n)),this.nazwa(t,n,o,i),this.input(t,a,n,o,i,"kwota_a"),this.props.kapitalowe&&this.input(t,a,n,o,i,"kwota_b"),this.props.kapitalowe&&this.input(t,a,n,o,i,"kwota_c"),this.props.podstawa&&this.input(t,a,n,o,i,"ppa"),this.props.podstawa&&this.input(t,a,n,o,i,"ppb"),this.props.podstawa&&this.input(t,a,n,o,i,"ppc"),this.props.podstawa&&this.input(t,a,n,o,i,"ppd"),this.props.poprzedni&&this.input(t,a,n,o,i,"_kwota_a"))}}]),t}(n.Component),ae=function(e){function t(e){var a;Object(p.a)(this,t),(a=Object(d.a)(this,Object(y.a)(t).call(this,e))).state={raport:"",pozycje:[]},a.zmiany=!1;var n=!0,r=!1,i=void 0;try{for(var o,s=Object.getOwnPropertyNames(Object.getPrototypeOf(Object(f.a)(Object(f.a)(a))))[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;(l.startsWith("handle")||l.startsWith("toggle"))&&(a[l]=a[l].bind(Object(f.a)(Object(f.a)(a))))}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"zapisane",value:function(){return!this.zmiany}},{key:"refresh",value:function(e){var t=e.data.pozycje.map(function(e){return e.kwota_a=_(e.kwota_a),e.kwota_b=_(e.kwota_b),e.kwota_c=_(e.kwota_c),e._kwota_a=_(e._kwota_a),e}),a=!1,n=!1,r=!1;t.forEach(function(e){e.klucz.length>1&&(a=!0),(e.kwota_b||e.kwota_c)&&(n=!0),e._kwota_a&&(r=!0)});var i=e.data.raport;i.all_edit=!0,i.zerowe=!0,i.size=t.length,this.setState({raport:i,pozycje:t,kapitalowe:n,poprzedni:r,podstawa:a}),this.zmiany=!1}},{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.podatek_get();case 3:t=e.sent,this.refresh(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("B\u0142\u0105d przy ustalaniu pozycji rozliczenia r\xf3\u017cnicy",e.t0),window.jpk_error("B\u0142\u0105d przy ustalaniu pozycji rozliczenia r\xf3\u017cnicy",e.t0);case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleSave",value:function(){var e=Object(u.a)(c.a.mark(function e(){var t,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("data",JSON.stringify(this.state.pozycje.map(function(e){return{id:e.id,a:O(e.kwota_a),b:O(e.kwota_b),c:O(e.kwota_c),ppa:e.ppa,ppb:e.ppb,ppc:e.ppc,ppd:e.ppd,_a:O(e._kwota_a),klucz:e.klucz,nazwa:e.nazwa,deleted:e.deleted}}))),e.next=5,D.podatek_save(t);case 5:a=e.sent,this.refresh(a),window.jpk_info("Zmiany zosta\u0142y zapisane"),window.opener.location.reload(!1),this.zmiany=!1,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),window.jpk_error("B\u0142\u0105d przy zapisywaniu rozliczenia r\xf3\u017cnicy",e.t0);case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"obliczenie",value:function(e,t){var a=this;if(!e)return"";var n=0,r="+";return e.split(" ").forEach(function(e){["+","-"].includes(e)?r=e:(e=O(a.state.pozycje[parseInt(e)][t]),n+="+"===r?e:-e)}),n}},{key:"wyrazenie",value:function(e,t){if(e){e=parseInt(e);var a=this.state.pozycje[e];switch(t){case"kwota_a":a.kwota_a=_(this.obliczenie(a.oblicz,t));break;case"kwota_b":a.kwota_b=_(this.obliczenie(a.oblicz,t));break;case"kwota_c":a.kwota_c=_(this.obliczenie(a.oblicz,t))}this.wyrazenie(a.zalezne,t)}}},{key:"handleChange",value:function(e){var t=this;return function(a,n){e[a]=n.target.value,t.setState(function(e){return e}),t.zmiany=!0}}},{key:"sumowanie",value:function(e){var t=e.klucz[0];if(!("A"===t||t>"I")){var a,n=[0,0,0,0],r=0;for(var i in this.state.pozycje){var o=this.state.pozycje[i];o.klucz[0]!==t||o.deleted||(r+=1,1===o.klucz.length&&(a=o),o.klucz.length>1&&(n[0]+=O(o.kwota_a),n[1]+=O(o.kwota_b),n[2]+=O(o.kwota_c),n[3]+=O(o._kwota_a)))}1!==r&&(a.kwota_a=E(""+n[0]),a.kwota_b=E(""+n[1]),a.kwota_c=E(""+n[2]),a._kwota_a=E(""+n[3]))}}},{key:"handleBlur",value:function(e){var t=this;return function(a,n){if(a.startsWith("nazwa")){var r=n.target.innerHTML.replace(/&nbsp;/g," ").trimEnd();r!==e[a]&&(e[a]=r,t.zmiany=!0),e.edytowana=!1}else e[a]=a.indexOf("kwota")>=0?E(n.target.value):n.target.value,e.zalezne&&t.wyrazenie(e.zalezne,!1),t.sumowanie(e);e.current=!1,t.setState(function(e){return e})}}},{key:"handleFocus",value:function(e){var t=this;return function(a,n){var r=n.target,i=e[a];i&&(i=i.trim()),a.indexOf("kwota")>=0&&(i=i.replace(/\s/g,"").replace(",","."),i=parseFloat(i),i=isNaN(i)?"":i.toLocaleString("pl-PL",{useGrouping:!1})),e[a]=i,e.org_value=i,e.current=!0,t.setState(function(){return{last:e}},function(){r.select&&r.select()})}}},{key:"niezerowy",value:function(e){return this.state.raport.zerowe||e.kwota_a||e.kwota_b||e.kwota_c}},{key:"toggleKapitalowe",value:function(){this.setState({kapitalowe:!this.state.kapitalowe})}},{key:"togglePoprzedni",value:function(){this.setState({poprzedni:!this.state.poprzedni})}},{key:"pozycjaUzytkownika",value:function(e){return Object.assign({element:"PozycjaUzytkownika",id:0,klu1:"",klucz:"",kontener:!1,kwota_a:"",kwota_b:"",kwota_c:"",nazwa:"",org_value:"",ppa:"",ppb:"",ppc:"",ppd:"",_kwota_a:"",_kwota_b:"",_kwota_c:""},e)}},{key:"handleDodajPozycje",value:function(){if(this.state.last){var e,t=this.state.last.klu1[0],a=!1;for(var n in this.state.pozycje){var r=this.state.pozycje[n];r.klu1[0]===t&&(r.klu1.endsWith("X")?r.deleted||(a=!0):r.deleted||(e=Number(n)))}var i=this.state.pozycje[e],o=1===i.klucz.length?1:Number.parseInt(i.klucz.substring(1),16)+1,s=t+Number(o).toString(16).toUpperCase(),l=this.pozycjaUzytkownika({klu1:s,klucz:s});this.state.pozycje.splice(e+1,0,l),a||this.state.pozycje.splice(e+2,0,this.pozycjaUzytkownika({klu1:t+"X",klucz:t+"X",nazwa:"inne"})),this.zmiany=!0,this.setState(function(e){return e})}}},{key:"handleUsunPozycje",value:function(){if(this.state.last){var e=this.state.last;e.deleted=!0;var t=e.klucz[0];if(!e.id){var a=this.state.pozycje.findIndex(function(t){return t===e});this.state.pozycje.splice(a,1)}var n,r=0;if(this.state.pozycje.forEach(function(e,a){e.klucz[0]===t&&e.klucz.length>1&&!e.deleted&&!e.klucz.endsWith("X")&&(e.klucz=t+Number(++r).toString(16).toUpperCase(),e.klu1=e.klucz),e.klucz[0]===t&&e.klucz.endsWith("X")&&(n=a)}),0===r&&n)this.state.pozycje[n].deleted=!0;this.sumowanie(e),this.zmiany=!0,this.setState(function(e){return e})}}},{key:"usunButton",value:function(){if(this.state.last&&this.state.last.klucz.length>1&&!this.state.last.klucz.endsWith("X"))return r.a.createElement("button",{type:"button",className:"btn btn-xs btn-default btn-pozycji",onClick:this.handleUsunPozycje},r.a.createElement("span",{className:"glyphicon glyphicon-remove iko","aria-hidden":"true"}),"Usu\u0144 pozycj\u0119")}},{key:"dodajButton",value:function(){if(this.state.last&&"AJK".indexOf(this.state.last.klucz[0])<0)return r.a.createElement("button",{type:"button",className:"btn btn-xs btn-default btn-pozycji",onClick:this.handleDodajPozycje},r.a.createElement("span",{className:"glyphicon glyphicon-plus iko","aria-hidden":"true"}),"Dodaj pozycj\u0119")}},{key:"handleStateChange",value:function(){this.setState(function(e){return e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"raport"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:this.state.kapitalowe,onChange:this.toggleKapitalowe,name:"kapitalowe"})," Kapita\u0142owe/inne"),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:this.state.poprzedni,onChange:this.togglePoprzedni,name:"poprzedni"})," Poprzedni rok"),this.dodajButton(),this.usunButton(),r.a.createElement("table",{className:"tpod"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{rowSpan:"2"},"Lp"),r.a.createElement("th",{rowSpan:"2"},"Tre\u015b\u0107 / wyszczeg\xf3lnienie"),r.a.createElement("th",{colSpan:this.state.kapitalowe?"3":"1",className:!this.state.kapitalowe&&"ar"},"Bie\u017c\u0105cy rok"),this.state.podstawa&&r.a.createElement("th",{colSpan:"4"},"Podstawa prawna"),this.state.poprzedni&&r.a.createElement("th",{rowSpan:"2",className:"ar"},"Poprzedni rok",r.a.createElement("br",null),"\u0141\u0105cznie")),r.a.createElement("tr",null,r.a.createElement("th",{className:"ar"},"\u0141\u0105cznie"),this.state.kapitalowe&&r.a.createElement("th",{className:"ar"},"z zysk\xf3w kapita\u0142owych"),this.state.kapitalowe&&r.a.createElement("th",{className:"ar"},"z innych \u017ar\xf3de\u0142"),this.state.podstawa&&r.a.createElement("th",null,"Art."),this.state.podstawa&&r.a.createElement("th",null,"Ust."),this.state.podstawa&&r.a.createElement("th",null,"Pkt"),this.state.podstawa&&r.a.createElement("th",null,"Lit."))),r.a.createElement("tbody",null,this.state.pozycje.filter(function(t){return e.niezerowy(t)&&!t.deleted}).map(function(t,a){return r.a.createElement(te,{key:a,raport:e.state.raport,pozycje:e.state.pozycje,wiersz:t,index:a,kapitalowe:e.state.kapitalowe,podstawa:e.state.podstawa,poprzedni:e.state.poprzedni,onChange:e.handleChange(t),onBlur:e.handleBlur(t),onFocus:e.handleFocus(t),onStateChange:e.handleStateChange})}))))}}]),t}(n.Component),ne=a(22),re=a(18),ie=function(e){function t(e){var a;Object(p.a)(this,t),(a=Object(d.a)(this,Object(y.a)(t).call(this,e))).state={};var n=!0,r=!1,i=void 0;try{for(var o,s=Object.getOwnPropertyNames(Object.getPrototypeOf(Object(f.a)(Object(f.a)(a))))[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;(l.startsWith("handle")||l.startsWith("toggle"))&&(a[l]=a[l].bind(Object(f.a)(Object(f.a)(a))))}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark(function e(){var t,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={id:0,opis:"",nazwa:""},"0"===this.props.match.params.id){e.next=6;break}return e.next=4,D.zalacznik_get();case 4:a=e.sent,t=a.data;case 6:this.setState(t);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleFileChange",value:function(e){this.setState({selectedFile:e.target.files[0],nazwa:e.target.files[0].name})}},{key:"handleOpisChange",value:function(e){this.setState({opis:e.target.value,tah:e.target.scrollHeight})}},{key:"handleSave",value:function(){var e=Object(u.a)(c.a.mark(function e(t){var a,n,r,i,o,l,u,p;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=new FormData,n=this.state.selectedFile,r=n?n.name:void 0,a.append("file",n,r),i=this.state,o=i.id,l=i.opis,u={id:o,opis:l},a.append("form",JSON.stringify(u)),e.next=10,D.zalacznik_save(o,a);case 10:p=e.sent,this.setState(Object(s.a)({},p.data.poz)),this.handleToList();case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,D.zalacznik_del();case 3:this.handleToList();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleToList",value:function(){this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"nazwa_pliku",className:"control-label"},"Plik za\u0142\u0105cznika"),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{className:"input-group-btn"},r.a.createElement("span",{className:"btn btn-primary"},"Wyb\xf3r pliku ",r.a.createElement("input",{type:"file",onChange:this.handleFileChange}))),r.a.createElement("input",{type:"text",id:"nazwa_pliku",value:this.state.nazwa,className:"form-control",readOnly:!0}))),r.a.createElement(K.c,{nazwa:"opis",rows:"5",etykieta:"Opis zawarto\u015bci za\u0142\u0105cznika",value:this.state.opis,form:{readonly:!1},onChange:this.handleOpisChange}),r.a.createElement("div",{className:"przyciski przyciski2"},r.a.createElement("button",{className:"btn btn-default",type:"submit",value:"Save",onClick:this.handleSave},"Zapisz"),r.a.createElement("button",{className:"btn btn-default",type:"submit",value:"Delete",onClick:this.handleDelete},"Usu\u0144"),r.a.createElement("button",{className:"btn btn-default cancel",value:"Cancel",onClick:this.handleToList},"Rezygnuj ze zmian"))))}}]),t}(n.Component),oe=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"ikony",value:function(){return r.a.createElement("ul",{className:"nav navbar-nav przyciski"},r.a.createElement("li",null,r.a.createElement(ne.b,{to:"/".concat(this.props.poz.id,"/"),className:"link-ikona"},r.a.createElement("span",{className:"glyphicon glyphicon-pencil","aria-hidden":"true"}))))}},{key:"render",value:function(){var e=this.props.poz;return r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-heading"},this.ikony(),r.a.createElement("a",{href:D.zalacznik_url(e.id)},e.nazwa)),r.a.createElement("div",{className:"panel-body"},Object(L.b)(e.opis)))}}]),t}(n.Component),se=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(y.a)(t).call(this,e))).state={pozycje:[]},a.handleDodaj=a.handleDodaj.bind(Object(f.a)(Object(f.a)(a))),a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.zalacznik_get();case 2:t=e.sent,this.setState({pozycje:t.data.pozycje});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleDodaj",value:function(e){e.preventDefault(),this.props.history.push("/0/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"panel-group",id:"accordion",role:"tablist","aria-multiselectable":"true"},r.a.createElement("div",{className:"list-group"},this.state.pozycje.map(function(e,t){return r.a.createElement(oe,{key:e.id,poz:e})})),r.a.createElement("button",{className:"btn btn-default",onClick:this.handleDodaj},"Dodaj za\u0142\u0105cznik"))}}]),t}(n.Component),le=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(ne.a,{basename:window.location.pathname},r.a.createElement("div",{className:"panel-body"},r.a.createElement("form",{onChange:this.handleChange,autoComplete:"off"},r.a.createElement(re.c,null,r.a.createElement(re.a,{exact:!0,path:"/",component:se}),r.a.createElement(re.a,{path:"/:id/",component:ie})))))}}]),t}(n.Component);window.location.href.indexOf("wprowadz")>=0?o.a.render(r.a.createElement(ee,{ref:function(e){window.app=e}}),document.getElementById("wprowadz")):window.location.href.indexOf("podatek")>=0?o.a.render(r.a.createElement(ae,{ref:function(e){window.app=e}}),document.getElementById("podatek")):window.location.href.indexOf("dodatkowe")>=0?o.a.render(r.a.createElement(le,{ref:function(e){window.app=e}}),document.getElementById("dodatkowe")):o.a.render(r.a.createElement(B,{ref:function(e){window.app=e}}),document.getElementById("root"))}},[[72,0,2]]]);
//# sourceMappingURL=sf.chunk.js.map